<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Locomotive + GSAP Zoom+Fade</title>
  <style>
    /* Minimal styles for demo */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    [data-scroll-container]{min-height:100vh}
    .hero{
      height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background:#0f1724;
      color:#fff;
      overflow: hidden;
    }
    .hero h1{
      font-size:6rem;
      line-height:1;
      transform-origin:center center;
      will-change: transform, opacity;
      margin:0;
    }

    .spacer {
      height:150vh;
      background: #f4f6f8;
      padding:4rem;
      color:#111;
    }
  </style>
</head>
<body>

  <!-- IMPORTANT: Locomotive needs a scroll container -->
  <div data-scroll-container>
    <section class="hero" data-scroll-section>
      <h1 class="hero-title">Zoom Me In & Fade</h1>
    </section>

    <section class="spacer" data-scroll-section>
      <p>Scroll more to see the effect continue / end.</p>
    </section>
  </div>

  <!-- SCRIPTS -->
  <!-- 1) GSAP + ScrollTrigger -->
  <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
  <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>

  <!-- 2) Locomotive Scroll -->
  <script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.js"></script>

  <script>
    // register plugin
    gsap.registerPlugin(ScrollTrigger);

    // init Locomotive
    const locoScroll = new LocomotiveScroll({
      el: document.querySelector('[data-scroll-container]'),
      smooth: true
    });

    // update ScrollTrigger on Locomotive scroll
    locoScroll.on('scroll', ScrollTrigger.update);

    // scrollerProxy — supports different loco versions (safe fallback)
    ScrollTrigger.scrollerProxy('[data-scroll-container]', {
      scrollTop(value) {
        if (arguments.length) {
          // set
          // loco v4 API:
          if (locoScroll.scroll && locoScroll.scroll.instance && locoScroll.scroll.instance.scroll) {
            return locoScroll.scrollTo(value, {duration: 0, disableLerp: true});
          }
          // older/v3 fallback:
          return locoScroll.scrollTo(value, 0, 0);
        }
        // get
        return (locoScroll.scroll && locoScroll.scroll.instance && locoScroll.scroll.instance.scroll)
          ? locoScroll.scroll.instance.scroll.y // loco v4
          : (locoScroll.scroll && locoScroll.scroll.y) || 0; // older
      },
      getBoundingClientRect() {
        return { left: 0, top: 0, width: window.innerWidth, height: window.innerHeight };
      },
      // pinType fallback
      pinType: document.querySelector('[data-scroll-container]').style.transform ? 'transform' : 'fixed'
    });

    // ANIMATION: zoom in + fade out as you scroll through the .hero section
    gsap.fromTo('.hero-title',
      { scale: 1, opacity: 1 },
      {
        scale: 2,                     // zoom-in to 2x
        opacity: 0,                  // fade to invisible
        ease: 'none',
        transformOrigin: 'center center',
        scrollTrigger: {
          trigger: '.hero',
          scroller: '[data-scroll-container]', // important — tell ScrollTrigger about Locomotive's scroller
          start: 'top top',
          end: 'bottom top',
          scrub: true                    // tie animation to scroll position
        }
      }
    );

    // make sure ScrollTrigger refreshes after locomotive is ready
    ScrollTrigger.addEventListener('refresh', () => locoScroll.update());
    ScrollTrigger.refresh();
  </script>
</body>
</html>
